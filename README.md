KMDLabs Website Text  --  2019.6.1
==================================

=============

### HOME

=============

Scalable and Customizable Development Laboratory


A fully scalable and customizable test bed for testing and developing your Komodo (KMD) based assetchains and Crypto-Conditions contracts, KMDLabs provides an incentivized test network, technical services and a support knowledge base.

KMDLabs‚Äô ease of use and rapid deployment allow projects of any technical level or size a place to experiment with the depth of Komodo and Crypto-Conditions technology.

Testing is conducted on the KMDLabs fungible cluster. Additional fungible and non-fungible chains and clusters can be added as needed for more customized or private development. It is possible for these chains to be notarized to the Bitcoin blockchain through the main Komodo (KMD) chain using Komodo‚Äôs Delayed Proof of Work (dPoW).

---

Free

Testing on the KMDLabs cluster is free. To add your own chain(s) only notarization fees are required. These fees decided by the notaries, not KMDLabs, and are very reasonable. Contact KMDLabs for current notarization rates.

---

Crypto-Conditions Tests

KMDLabs provides thorough contract testing services for those developing with Crypto-Conditions. Testing plans catering to your specific project needs can be implemented.

---

Incentivized Testing

In addition to offering a testing platform KMDLabs also incentivizes testers and developers to participate in projects.
Opportunities are readily available for those interested to gain knowledge and practical experience in this fast developing field. Anyone who can contribute can contribute. Developers will certainly find worthy challenges to overcome. Relative newcomers will have ample opportunity to break things. Bounties in KMDLabs are paid for breaking test chains, finding bugs and also for finding solutions.

---

KMDLabs Main Cluster

KMDLabs is the main blockchain in a cluster of fungible Komodo assetchains (Komodo‚Äôs MoMoM technology allows the transfer of assets (coins) across multiple blockchains) that provide incentivized testing, debugging and development of Komodo Platform‚Äôs Crypto-Conditions contracts (smart contracts) and underlying software.

---

Learn More

Technical details and information on how to begin testing can be found on the How KMDLabs Works and Getting Started pages and through the contact information below.

---

Join the Future

Your project can find itself a home here, as others have (Dragonhound, TROLLBOX, BlastStream, Oracle.earth), and make use of the community synergy, knowledge and infrastructure KMDLabs provides.  The KMDLabs team can also provide technical support with your live project, as demonstrated in the work done with KMDICE .

Contact us and join the future.

=============

=============

### FAQ  -  *NOTE: An much updated version is being worked on by @Alright as of 2019-6-1

=============

TL;dr

KMDLABS is a R&D test ground for Komodo (KMD) technology and Crypto-Conditions contracts (Smart Contracts). You are able to join incentivized tests that are underway or do your own work on the main KMDLabs fungible cluster. Your own chains and clusters can be added for more customized or private development. These chains can be notarized to the Bitcoin blockchain through the main Komodo(KMD) chain using Komodo‚Äôs Delayed Proof of Work (dPoW).

From gaining experience using Crypto-Conditions contracts to debugging multi-contract clusters, KMDLabs provides you with the tools, platform and resources to do so quickly and easily. This allows you to spend your time on testing, not setup.

Come and build your vision of the future.

---

What is KMDLABS ?

‚Äì main Komodo(KMD) assetchain of a fungible test network cluster (mineable/stakeable)
‚Äì scaleable
‚Äì chains and clusters added to KMDLABS cluster as testing needs require
‚Äì add your chain or cluster for testing (fungible or non-fungible)
‚Äì addition of chains to main fungible cluster does not increase total coin supply
‚Äì dPOW Notarization
‚Äì notarize chains to BTC blockchain through Komodo dPOW technology (optional)
‚Äì provide incentivized testing, debugging and development of Komodo Platform‚Äôs Crypto-Conditions contracts (smart contracts) and underlying software
‚Äì fast and simple setup and use
‚Äì community of developers and testers provide assistance, ideas and skills
‚Äì do your R&D on existing KMDLABS assetchains or create your own
‚Äì gain knowledge, experience and resources working with top devs on other project using the most cutting edge technology
‚Äì Crypto-Conditions contracts tested and debugged on demand

---

When ?

‚Äì origins in the PoS64Test staking tests, c. June 2018
‚Äì STAKED, a live proof of concept (PoC) testing environment, shows remarkable promise
‚Äì in 6 months STAKED shows the potential of incentivized testing
‚Äì STAKED conducts a multitude of first in the world tests
‚Äì STAKED develops 3 major spin-off projects (Dragonhound <LINK & INFO>, TROLLBOX <LINK & INFO>, BlastStream <LINK & INFO>)
‚Äì STAKED refines running and setup of notarization networks
‚Äì the groundwork is set for KMDLABS

---

When Lambo ?

‚Äì good question
‚Äì depending on things like how you use the skills, knowledge and resources you gain from working with top devs and the latest technologies, that‚Äôs up to you

---

Who is KMDLABS?

‚Äì core contributors are joined by members of the Komodo community at large
‚Äì more well-know participants:

    blackjok3r
    Alright
    smk762
    CrisF
    jorian
    gcharang
    zatJUM
    SHossain
    CHMEX
    TonyL
    CMaurice
    gt
    metaphilibert
    ComputerGenie
    Nabob
    daemonfox
    webworker01
    Bar_F1sh_Rel (Scottrock)
    mylo5ha5
    dimxy
    PHBA2061
    Exile13

Advisor ‚Äì jl777

‚Äì anyone who can contribute, can contribute
‚Äì challenging problems for devs, opportunities for noobs

---

Who is KMDLABS for ?

‚Äì projects from large (multi-chain ecosystem using numerous technologies and CCs) to small (single assetchain testing parameters or looking to gain CC experience)
‚Äì developers and relative noobs alike looking to gain skills, experience and contacts
‚Äì those looking to put their skills to use participating as testers and/or with development
‚Äì anyone who can contribute can contribute

---

Where ?

‚Äì community located around the globe
‚Äì contact
‚Äì Discord: https://discord.gg/tDKq5Mb
‚Äì Email: contact@KMDLabs.io
‚Äì Website: https://KMDLabs.io/
‚Äì Github: https://github.com/KMDLabs/

---

Why ?

‚Äì KMDLABS allows you to concentrate on development and testing
‚Äì ease of use
‚Äì rapid deployment
‚Äì work with and build the very latest in technology
‚Äì collaborate with top devs
‚Äì bounties and incentives
‚Äì break things!
‚Äì challenging problems
‚Äì community provided synergy
‚Äì anyone welcome to participate

---

How to ?

Participate
‚Äì Getting Started page
‚Äì contact us
‚Äî- Discord: https://discord.gg/tDKq5Mb
‚Äî- Email: contact@KMDLabs.io
‚Äì get in touch

Break & Make
‚Äì join current testing and development
‚Äì bounties (in KMDLABS)
‚Äì breaking test chains
‚Äì finding bugs
‚Äì finding solutions
‚Äì see Bounties page for details
‚Äì start your own R&D

---

How much ?

‚Äì free to use main cluster
‚Äì to add chains only need to pay notarization fees
    ‚Äì fees decided by Notaries
‚Äì contact KMDLabs for current rates
‚Äì you can set bounties as you see fit, if you require incentivized tests
    ‚Äì contact KMDLabs if you would like recommendations

---

Value ?

‚Äì your time
    ‚Äì KMDLABS saves it for you
‚Äì KMDLABS and participants are working with technologies that are well ahead of most, if not all, others
    ‚Äì you can use this technology as you wish
        -a significant advantage
‚Äì KMDLABS attract top level developers
‚Äì as Crypto-Conditions contract usage increases so does the demand for R&D
    ‚Äì KMDLABS fills this demand with its easy to use infrastructure

---

Technical ?

For more in-depth details on KMDLabs please visit the Technical page.

=============

=============

### CONTACT

=============


KMDLabs (LABS)

    Website: https://KMDLabs.io
    Discord: https://discord.gg/tDKq5Mb
    Email: KMDLabs@protonmail.com

KMDLabs Links

    GitHub: https://github.com/KMDLabs
    Explorers:
    Trello: https://trello.com/b/bH38cFbu/stakeddev
    BlastStream.io
    TROLLBOX
    Dragonhound
    Oracle.earth
    BitcoinTalk: 

Resources

	Komodo

https://komodoplatform.com
https://docs.komodoplatform.com/
https://developers.komodoplatform.com/
https://docs.komodoplatform.com/home-whitepaper.html

	Crypto-Conditions

https://medium.com/@komodoplatform/cryptoconditions-utxo-based-smart-contracts-on-komodo-platform-3155b58e1c9a
https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/
https://github.com/KomodoPlatform/Mastering_CryptoConditions
https://docs.komodoplatform.com/home-cc.html
https://docs.komodoplatform.com/cc/index-book-jl.html

	 Blockchain Creation

https://docs.komodoplatform.com/komodo/create-Komodo-Assetchain.html
https://docs.komodoplatform.com/komodo/assetchain-params.html
https://docs.komodoplatform.com/komodo/example-asset-chains.html

=============

=============

### WHO

=============

Who

KMDLabs finds its origins in the testing conducted on the PoS64 staking algorithm created by jl777 for staking on KMD assetchains.
This algorithm was tested and improved by jl777 and the members of this PoS64 test group.  From these experiments the need for a state of the art, dedicated testing platform became very clear.
Testing expanded its scope and STAKED was born. STAKED furthered its experience with incentivized testing while developing and refining the STAKED software over various cluster networks through its seven iterations.

---
 
Who is participating?

A group of core contributors are joined by members of the Komodo community at large.

Some of the more well-know participants include:

    blackjok3r
    Alright
    smk762
    CrisF
    jorian
    gcharang
    zatJUM
    SHossain
    CHMEX
    TonyL
    CMaurice

    gt
    metaphilibert
    ComputerGenie
    Nabob
    daemonfox
    webworker01
    Bar_F1sh_Rel (Scottrock)
    mylo5ha5
    dimxy
    PHBA2061
    Exile13

Advisor ‚Äì jl777

---

Who can contribute?

Anyone who can contribute, can contribute. Devs will certainly find worthy challenges to overcome. Relative noobs will have ample opportunity break things.

Community is located around the world so KMDLabs Discord is active through all time zones.

Please come and visit. You will find a wide variety of people doing their part to create the future. People like you.

=============

=============

### WORKS

=============

Works

There are a variety of projects ongoing in KMDLabs at any one time. We encourage you to come and make use of our resources to start your own and to join others in theirs.
If you are looking for a place to start please visit our Discord channel and let us know what areas you are interested in.

Come and add your contributions to the list below:

Crypto-Condition Contracts

    faucet
    dice
    assets
    rewards
    channels
    oracles
    multisig
    momom

Technology

    PoS staking strategies
    Assetchain params
    MoMoM
    Notary Nodes / Notarization
    Assetchain Clusters
    TxBlaster
    DWY attack recovery

Projects & Spin-offs

    STAKED 1-4 ‚Äì Incentivized testing
    STAKED 5-7 ‚Äì Notary Node network
    Dragonhound
    TROLLBOX
    BlastStream
    Oracle.earth

RPCs

    setpubkey
    getlastsegidstakes
    getiguanajson
    getnotarysendmany
    cleanwallettransactions
    z_mergetoaddress ‚Äì (changes to)
    getnotarysendmany
    getnotarypayinfo
    getiguanajson
    notaries
    opreturn_burn
    getimports

Other

KMDICE
Trello

https://trello.com/b/bH38cFbu/stakeddev

Bugs found

Please see the Bug Report page for a list of previous reports and to file your own.

=============

=============

### Privacy

=============

<ADD PRIVACY POLICY IF NEEDED>

=============

=============

### Main Cluster

=============

Main Cluster

The KMDLabs main cluster is where the bulk of testing occurs.

The KMDLabs blockchain is the center of a fungible grouping of independent blockchains with the -ac_cc=101 parameter set. This allows for any one of the chains to interact with the other chains via cross chain smart contracts. This is made possible through Komodo‚Äôs MoMoM technology.

The independent chains making up the KMDLabs cluster have different parameters permitting testing across blockchains with differing functionalities. New chains can be added to the cluster at any time, giving great flexibility in testing options. The only current requirement is that all chains have no block reward, and use -ac_algo=verushash11 and -ac_staked=20 and -ac_notarypay. This means at this time, main cluster chains cannot use -ac_pubkey or -ac_script. Its possible we can change this in the future. We have options, because the coins can be sent back to the main chain, and the 0BR chains can be replaced at any time.

---

Tier 2 Notary Node Network

A unique and key feature of KMDLabs is that it has its own notary node network.  This network is second tier to the main KMD notary nodes. In addition to ensuring dPoW for assetchains as KMD notaries do, the KMDLabs‚Äô notaries also perform the function of MoMoM notarization. The notarization process for MoMoM, particularly between low hash rate chains, is a necessity for cross-chain imports and for making certain that export transactions can‚Äôt be reversed by a chain reorganization. This MoMoM notarization prevents the creation of coins ‚Äúout of thin air‚Äù.

The majority of test chains in the KMDLabs cluster are powered by PoS combined with CPU PoW hashrate from notary nodes and, apart from transaction fees, have a zero block reward. This requires that they make use of dPoW to secure them against double spends.  The PoS component of the chains prevents them from stalling due to a hash attack. The PoW component of the chains will move the chain forward and allow the transfer of staking funds back into the chain in a case where all staking coins are (accidentally) removed. There are mechanisims in place that allow a chain to move along (although very slowly) with even very small staking weights.
 
---

Example Cluster Configuration

The CFEK test cluster gives an idea of a very basic cluster configuration.

-addnode=195.XXX.XXX.X -addnode=195.XXX.XXX.X -addnode=103.XXX.XXX.X -ac_supply=100000 -ac_staked=51 -ac_name=CFEK -ac_reward=10000000000000 -ac_cc=102
-addnode=195.XXX.XXX.X -addnode=195.XXX.XXX.X -addnode=103.XXX.XXX.X -ac_supply=1000 -ac_staked=1 -ac_name=CFEKED -ac_reward=1 -ac_end=1 -ac_cc=102
-addnode=195.XXX.XXX.X -addnode=195.XXX.XXX.X -addnode=103.XXX.XXX.X -ac_supply=1000 -ac_staked=1 -ac_name=CFEKING -ac_reward=1 -ac_end=1 -ac_cc=102

-addnode=195.XXX.XXX.X -addnode=195.XXX.XXX.X -addnode=103.XXX.XXX.X -ac_supply=1000 -ac_staked=1 -ac_name=CFEKLF -ac_reward=1 -ac_end=1 -ac_cc=102


This four chain cluster was used to test cross-chain migrations, assetchain params, PoW/PoS, NN network functionality and a multitude of changes to the underlying STAKED software, among other things.

As you can see the testing possibilities are enormous with even such a basic cluster configuration.

---

Free to use

Testing on the KMDLabs cluster is free. There is also the possibility of earning bounties, mining and staking and earning through running a KMDLabs Notary Node.

---

Adding chain(s)

The value of one coin in the cluster is equal to that of any other (1 KMDLabs(LABS)), regardless of what chain it exists on. Therefore a coin mined or staked on XCHAIN is evenly exchangeable for 1 KMDLabs(LABS) and vice versa.

The total coin supply is balanced across the cluster. Adding a new chain to the cluster requires the provable burning of an amount of KMDLabs(LABS) equal to the amount of coins added. Chains other than KMDLabs(LABS) will have a 0 block reward for the time being (ac_end=1). There is a consensus rule in the LABS komodod that means any chain launched in the main cluster cannot have any block reward past block 1, no matter what params are used. Please see the Technical page or contact us on Discord to find the correct method to do this.

Adding and removing chains from the cluster and notarizing chains is made fast and simple through the use of STAKED software. If you would like to add chains to the cluster assistance can be easily had through Discord.

---
Cost of adding chains

KMDLabs Notary Nodes receive a fee for notarizations. This pay-per-notarization fee is paid by the chains upon notarization and decided by the Notaries themselves. For the latest notarization rates please consult in Discord.

Please contact us with any questions and to learn more.

---

Obtaining KMDLabs(LABS)

    mining and staking
    bug bounties
    running a Notary Node
    purchase with HyperDEX
    purchase on BarterDEX
    through a BarterDEX private trade
    using escrow
    non-escrow trade (not recommended)
    Graviex.net (LABS/KMD)
    Graviex.net (LABS/BTC)

=============

=============

### HOW KMDLABS WORKS

=============

How KMDLabs Works

KMDLabs is a testing and development platform suitable for research on many scales.  From gaining experience using Crypto-Conditions contracts to debugging multi-contract clusters, KMDLabs provides you with the tools, platform and resources to do so.  This allows you to spend your time on testing, not setup.

The final version of this page is under discussion and modification while the finer details of suggested procedures are determined.  You are welcome to join these discussions and add your thoughts.

Discord:  https://discordapp.com/channels/412898016371015680/497080413387489291
KMDLabs pad: Please ask in Discord

This page is very much under construction but the following image should give a basic idea the KMDLabs flow.  The details are in a state of flux but the general procedure shouldn‚Äôt change to a large extent.

Suggestions and feedback are very welcome.

---

How to Create a Chain

Step 1
Create a well commented CC contract or modify an existing one‚Äôs functionality.
 
Step 2
Very simple testing done on non-LABS testing chains. This testing period can be used for fixing any very obvious bugs. These chains can hardfork as much as necessary. These chains are not CFEK or LABS chains. They are not notarized.
 
Step 3
PR the code to the KMDLabs repo. Detail and discuss the purpose and implementation in PR comments. Wait until it is merged.
 
Step 4
Start a CFEK chain. This chain‚Äôs emissions can be anything. It does not have to match the emissions of the planned LABS chain. If the contract being tested relies on coins from the coinbase transaction, these coins will need to be burned on the main chain.
 
Step 5
Prove that you are capable of maintaining the CFEK chain. This means you keep it from stalling, and that you fix any bugs in a timely matter.
 
Step 6
Create the LABS chain. This must be staked with at least 2000 LABS to keep the chain from stalling. A chain might run with <2000 coins, but it would be susceptible to chain stalls if UTXOs are not distributed efficiently. You must have the minsigs # of notaries willing to notarize this chain for the ac_notarypay price.
 
Once you are sure you have enough notaries willing to notarize the chain. Burn the block 1 coinbase amount. Please note this number will differ from the ac_supply amount. Use the getnotarysendmany command to distribute 5 LABS per notary*.
 
To continue paying notaries  the ‚Äúburn address‚Äù on the chain must be funded. This has been created in a way that allows the chain to extended the period of notarization, rather have a fixed notarization lifespan. Coins can be migrated to and from other chains throughout the cluster and sent to the burn address as required.
 
To check the notarization funds balance the getnotarypayinfo RPC can be used.
 
* current at the time of writing. Please check in Discord whether this has changed.
 
Step 7
Notaries sync the chain and begin notarizing.

---

The Testing Process

Step 8
Testers can now sync the chain and transfer coins to it from another LABS chain. Testers should be aware that coins could be stolen, lost or burned due to a faulty CC. As testing is done, testers can begin to rely on a CC for larger and larger amounts of coins.
 
Step 9
If coins are stolen, lost or burned due to a bug in the CC, the tester can make a bounty claim to the notary nodes. If a tester can steal, lose or burn coins due to a bug, the tester can make a bounty claim to the notary nodes. Whether the bounty is paid out is at the discretion of the notary node vote.
 
Notaries must be able to determine if a bounty is fair or if it is not. If the notary nodes determine it is not fair, the tester can create a new bounty claim based on feedback from the notaries. This amount is limited to 0.5%* of the weekly emissions. This amount does not carry over from week to week. If the limit is not reached for a given week, these coins simply never come into existence.
 
* current at the time of writing. Please check in Discord whether this has changed.
 
Step 10
The tester will now need to work the the contract dev and the community to fix this bug. The bounty will not be paid until the bug fix is implemented into the chain. This process will involve repeating steps 1-4 until a bug fix is ready for the LABS network.
 
Step 11

Bounty is paid üôÇ repeat steps 8-11.

<IMAGE NEEDS UPDATING WITH THE LATEST CHANGED>

=============

=============

### NOTARY  NODE

=============

Notary Nodes

Notary Nodes play a major role in securing the KMDLabs‚Äô chains. These Notary Nodes gather data, notarize this data to the Komodo blockchain and then re-notarize this back onto each specific KMDLabs chain.

---

Current NN Network

The original 20 notary nodes were selected through a ‚Äòtrial-by-fire‚Äô conducted on one of the final testnets (CFEK/LABS) leading up to KMDLabs. The notary candidates were required to set up their node and be in the first 20 to notarize a test chain.

---
 
NN Payment

Notary payment went though several iterations over a busy 3 week period resulting in the current mechanism. During this testing four new -ac_params were developed to provide a solution to the complex problem of Notary payments. These parameters are available for any chain to use in the future, but they still did not meet the requirements of Notary payment.

KMDLabs uses a pay-per-notarization (-ac_notarypay=) system where a special coinbase is created for any block that contains a notarization. This means that notary nodes are paid directly for each notarization they create. The draw back to this model is that coin emission is not an exact known amount. Emission, however, can only be less than the maximum, never more, and that is what is relevant in this situation.

---

NN Selection

The goal of the KMDLabs Notary selection process is to accrue a team of 64 extremely trustworthy and efficient Notary Nodes, testers and developers.

In KMDLabs the number of Notary Nodes is dynamic, up to a maximum of 64 nodes. Every two months up to two additional Notary Nodes can be added until the maximum of 64 is reached. The process for this is still under development with the currently implemented system being as follows:

Every two months the lowest performing nodes on the network will be put to a vote for possible replacement. Unless a node has been performing extremely poorly, and there is no expectation of this, nodes will not be involuntarily removed from the network. Only two nodes can be added per two month period regardless of whether notaries leave the network.

---

General Guidelines:

    Notary nodes must make at least 25% of the average notarizations. (ie. if the average notarization across all nodes is 2000 per month, any nodes under the total of 500 notarizations will be put to a vote by other notaries. If it is decided they are allowed to remain, AND they want to stay, they can.)
    If a notary operator simply wants to retire, they may choose to do so.
    The number of possible Notary operators will be increased by two using a random lottery of available candidates.

Those who desire a Notary position are advised to participate in the community, join in tests and possibly collect bounties, mine/stake or develop contracts until a Notary role opens up for them. In addition to Notary candidates gaining experience through this process it also helps protect the network from possible Sybil attack. (An attack where a single entity creates multiple identities to subvert a network.) Through something of a waiting period and random selection KMDLabs can somewhat ensure that each node is operated by a unique individual.

The main goal of having a dynamic number of Notary Nodes is to lead to cheaper prices for notarizations over time and to ensure that running a Notary Node is profitable. The most efficient nodes/operators will be able to make the most notarizations while at the same time not punishing those who don‚Äôt have the resources to become one of the very top performing nodes. Everyone will have ample opportunity to earn adequate LABS (coins) and gain enough experience to become a top performing node.

Increasing at the maximum rate of two nodes every two month, it will take 44 month (3.6 years) until the maximum of 64 Notary Nodes is reached. It is expected that some node operators will retire from their Notary position so it will be some time before the network has a full complement of 64 Notary Nodes.

---

Notary Node Responsibilities

    Keep your notary node up to date and running.
    Add new chains when required.
    Keep your node secure.
    Aim to make the maximum number of notarizations, earning as much in the way of LABS(coin) as possible.

---

Bounty Signer Responsibilities

The bounty system is in the process of being finalized and is the top priority on the KMDLabs project list. This development process will use the system under creation to bring about the final bounty mechanism. Aiming for the simplest solution CC may, or may not, be made use of.

As it stands, pre-launch, the basic mechanism looks like this:

    A separate chain, is mined/staked by notaries.
    There is a daily payment of coins that is ABOVE the supply of 10 coins per minute.
    This supply is suggested to be between 0.5-5% of the supply and is locked in a multisig address. (ie. 0.5% would be 720 coins per day available for bounty payouts)
    The funds expire if not used. The best mechanism for going about this is has yet to be determined.
    If the bounty coins are not claimed they will cease to exist and will not inflate the supply.
    Bounties only create supply if bugs are found and fixed.
    Project devs are also able to put up their own bounties, over and above this supply, if they want or need to get something done faster or take priority over other projects.
    Bounty signers are responsible for signing bounty claims that they agree are fair.

This mechanism will evolve and change as the working implementation is developed and optimized. There are a number of possible solutions being considered. KMDLabs developers and community excel at finding the best solution for a problem. This has been, and is being, demonstrated in the creation and beginnings of the KMDLabs project itself.

---

Matters Under Consideration

    Notary numbers may vary with needs.
    Bounty % may be adjusted.
    Chain running costs may need adjustment.
    Important matters should not be decided by notaries alone. Up to a stakeholder vote.

---

Notary Node Setup

For detailed setup instructions please visit the KMDLabs Github repo.

=============

=============

### STATISTICS *Note: Under development

=============

http://oracle.earth/ntx_graph/

=============

=============

### BUG REPORTS

=============

General guidance on reporting issues

(Regarding Crypto-Conditions and SmartContract development)

    specific chain parameters used
    EXACT rpc call and parameters used
    most important! the raw tx generated
    clear description of why you think it is a bug (please check the raw tx details to make sure all vins are valid, signed and all vouts are sane)

‚ÄúI tried X and it didnt work‚Äù does not help much.

---

Thanks for reporting!
<FORM>
Name *
Bug report *

---

Previous Reports

STAKED1
Week of: August 13, 2018

Bugs found:
The faucet contract was tested thoroughly and rewritten based on this testing. The faucet now requires a new address for each faucetget transaction and now dispenses 0.1 coin.
The POS diff adjustment algorithm was tweaked based on testing done this week. We found that the previous algorithm wasn‚Äôt well suited for 99% POS.
A bug in which getblocktemplate included POS transaction while mining was fixed.
A bug in which setgenerate false did not respond properly was fixed.
Build issues on MacOS and Windows were found and fixed.

The first week of STAKED went exceptionally well. We had about 10 active participants throughout the week, and we found a fair amount of bugs.

blackjok3r
August 26, 2018

faucet ‚Äì spammed on blocknotify at beginning, finding attack vector and reported it was using large CPU and locking daemon, helped debug

reproduced getblocktemplate with haiduc and jl to stop PoS transactions being added to PoW blocks, as my stats script was miss reporting PoW/PoS becasuse of this bug.

CHMEX
August 26, 2018

filled the faucet with small utxos after that is was slow if thats considered breaking i take the stake2 bounty

webworker01
August 26, 2018

-constantly took faucet funds ;p

-test windows build, figured out debugger to get some real error msg

Un Haiduc
August 26, 2018

identified issues with PoW difficulty and helped jl dampen some of the ‚Äúdamage‚Äù inflicted on PoS ‚Äì RPo8VKmQA5V9yG3omhPa6yMe3xNyvXadG4

xrobesx
August 26, 2018

reproduced @nabob‚Äôs report of Mac build failing because of CC outputs :), looped the faucet for about 20 minutes
STAKED2
Week of: August 20, 2018

Bugs found:
Alright: found segfault related to `kvupdate` which allowed a ddos-esque type attack
Blackjok3r: Unlocked the `rewardscreatefunding` tx via `rewardsunlock`, empything the contract

Alright
August 26, 2018

Found segfault in komodod

How to reproduce:
komodo-cli -ac_name=STAKED2 kvupdate key 8000bytesofdata > 1 passphrase

Was fixed here
https://github.com/jl777/komodo/commit/01801559dc8385bd23bd94f67c4ab6e41170bb3c

blackjok3r
August 26, 2018

Found no entropyTX creates invalid TX for dice instead of an error.
How to reproduce: call dicebet when there is no entropy TX in the dicefund. It would return an invalid TXID instead of an error.

‚Äì Spammig dicebet for 48h continiously doubled my amount of coins. I think it was just causing the bets to timeout. Not sure of a bug or not, and I got about 1000 coins out of dicebet spam anyway.

‚Äì Locked 100 coins into rewards 25APR, was not able to unlock. I have all of the commands and HEX for this, was posted in #staked, but might have been lost. Once this was able to be unlocked, it unlocked all of the rewards funding.

CrisF
August 27, 2018

Not a bug ‚Äì known (by some) issue

Due to copying STAKED1.conf to STAKED2.conf komodod ran STAKED2 with the same RPC credentials and port as STAKED1
‚Äì left STAKED1.conf in place
‚Äì ran komodo-cli -ac_name=STAKED1
‚Äì komodod read the credentials and rpc port from STAKED1 and communicate to whatever komodod is on that port with those credentials, now STAKED2

(Thanks to webworker01 for the explanation)

=============

=============

### GETTING STARTED

=============

Getting Started

Testing and Development work in KMDLabs is done using STAKED software.

STAKED is the reason that work on KMDLabs is so productive. STAKED automates and streamlines a large portion Komodo‚Äôs native software while adding additional features. Much of this has been accomplished through the use of the new technologies, notably oracles.cc, that we have been testing in KMDLabs.

Please understand that thing evolve very rapidly in KMDLabs. We are fortunate in that we are able to implement the very latest developments that come out of the labs. The down side of this is that sometimes there is a lag until documentation can catch up. To make certain that you have the latest instructions it is strongly suggested that you visit the KMDLabs Discord in addition to KMDLabs on Github.

There are currently two versions of the STAKED software.
STAKED

---

STAKED is used for most testing and development work. Bug hunts, staking and mining are performed on this version of the software.
STAKEDNOTARY

---

STAKEDNOTARY is used by those participating in notarizations. It is recommended to not mine or stake on a node that is notarizing.

---
Installation and Usage Instructions

STAKED
https://github.com/KMDLabs/staked#staked
(Some of the Crypto-Condition test plans should give ideas if you are not certain where to start. Found here: https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=55258823
 
STAKEDNOTARY
https://github.com/KMDLabs/StakedNotary#staked-notary-control-scripts

For more information on how to become a Notary Node and how they function please see the Notary Nodes page.

That‚Äôs it. Now you can get to work!

If you have any questions or have suggestions please contact us on Discord.

=============

=============

### TECHNICAL

=============

Technical

Differences between KMDLabs Komodo (STAKED) and KMD Komodo

KMDLabs Komodo (STAKED) is fully compatible with KMD Komodo. The KMDLabs version of Komodo has been modified to give it a great deal of additional functionality. These modifications are all merged back to KMD now.

    Protocol version / different notary pubkeys
    -ac_notarypay described in technical detail at the bottom of this page.
    Komodo seeds are disabled for staked chains
    Wallet filter for staked notaries
        This has been updated and is now active in the main KMD codebase also. 
    Temp file for received blocks
        Any blocks received that pass early validation and fail slow validation, will be left in this file. This is cleared once there has been a notarization past the highest height of blocks that are left inside of it. This means that any block that cannot be reorged back into the main chain, because of a notarization, will be purged from the local DB automatically. This stops almost all possible spam attacks that could fill a node‚Äôs disk.

MoMoM differences between STAKED (KMDLabs) and FSM (Komodo)

    Extra set of pubkeys possible (libscott and blackjok3r‚Äôs code, required for dPoW) in STAKED (KMDLabs).
    Can‚Äôt send a migrate from a chain to itself in STAKED (KMDLabs).
    Can‚Äôt send more than 1 million coins at once in STAKED (KMDLabs). (Along with a change in max money that prevents the sending of coins that can‚Äôt imported.)

---

RPCs

     setpubkey

Allows user to set -pubkey= without restarting the daemon. Only works once.

    getlastsegidstakes

Gives a tally of stakes from chain tip back a specified number of blocks. An improvement over getsnapshot as it gives an idea of what is being staked.

    getiguanajson

Returns a valid JSON for the current ERA. In this way Iguana config is not separate from komodod. This prevents human error when changing keys, ports and other information.

    getnotarysendmany

Returns a JSON object with all Notary addresses and the amount of coins specified in input. Used for Notary Stats and for funding Notaries.

    cleanwallettransactions

See StakedNotary Github readme for information on this soft wallet reset . A patch is available for mainnet should anyone need.

    changes to zmergetoaddress

Allows a simple, one RPC call to merge all notary utxos into a single utxo ready for splitting. Ignores the utxos needed for notarizations.

---

ERAs

Notary pubkey arrays are in a 3 dimensional array, making it much easier to have a very large number of eras and to loop over them. This makes changing keys very easy. It also makes the code much simpler and easier to follow.

There is a function in one of the Komodo.h files where, on block receive, the ERA it is in is determined and an array of Raddresses is created into a global var. The array is only updated after the era has finished. This is mainly used only for the wallet filter and will likely be depreciated in the future, being replaced with an improved, more reliable method.

The main LABS chain also uses ERAs, merged down from Verus Coin, allowing a slow ramp-up of block rewards over a week-long period. This has been implemented to realize the most fair launch possible.
 
---

-ac_notarypay=

This is the technical description of -ac_notarypay, a special coin emission developed by KMDLabs to pay its notaries.
 
Developing this is what has delayed our launch date by so long. This information is not meant for the general public, but for technical readers, who want to know in depth how this system works. As it is part of coin emissions, and has never been done before, I feel it needs to be well described here. Kind of like our technical whitepaper if you will.
 

The basic idea is that Notary Nodes are paid for each notarization they make. The ac_param itself, is `ac_notarypay=‚Äùnumber of sats per notarization‚Äù`.
This means specifically, that each time a notarization occurs this amount of sats is created. This is not part of the normal block reward of 7 coins, but rather an extra on top of that.

On the main chain, this number is `1500000000` once the first week is finished.
The math behind this is:
`7 + 3 = 10` Which has always been the block reward for STAKED.

Notarizations on LABS happen every 5 blocks, so
`1500000000 / 5 = 300000000` which equals 3 coins. This will mean that under perfect conditions the total emitted coins per block for LABS is 10 coins a minute.

However the conditions are not always perfect. LABS notarizations can only happen if 3 KMD blocks have passed. What this means is that if 5 blocks of LABS have passed before 3 KMD blocks have passed it will wait another 5 LABS blocks to create a notarization. Therefore notarizations do not happen exactly every 5 blocks, it can be 10 or sometimes in extreme cases 15 blocks.

Notarizations, by design, do not always happen on schedule. There could be some connection problem or a chain reorg (between notarizations) that prevents the notaries all agreeing on what chain is the correct chain. As such, they will skip that round.

With more notary nodes and a higher hash rate, this becomes less of a problem but it does exist so has to be mentioned here. Rather than account for these possible conditions, we have decided to assume perfect conditions for the amount paid as that caps the coin emission to the rate that we would like.

Now for the technical description of the code. This payment mechanism went through a few iterations until we got to something that actually works. It‚Äôs not perfect, but nothing is. 
Notaries:

Create a notarization which then propagates to mempool.

Miners:

1) Miner scans its mempool to create a block and check whether each tx is to the ‚Äúcrypto‚Äù address.

2) When miner finds a tx to the crypto address it then checks if the vins are from the current set of notary nodes. It does this by looking up the ERA with the timestamp of the block that it is going to create.

3) If it finds a tx with enough vins from notary node pubkeys it then checks if each vin is unique.

4) If all vins are from different notaries it then checks what block height the notarization is notarizing.

5) The miner then saves the Notary IDs (location of pubkey in array of current eras pubkeys).

6) It sets the notarization that it selected to mine at the maximum mining priority.

7) It then sets any other transactions that have max priority at `max ‚Äì 10`. This ensures that there is 1 notarization allowed in each block. This is a consensus rule. There cannot be more than 1 notarization in a block, and it must always be the first tx in a block that is mined. Any blocks mined without these conditions are rejected by `connect block` and will not be accepted by any nodes in the network.

8) Then the miner uses the Notary IDs it has found when searching the notarization vins to construct a coinbase that pays these pubkeys the desired amount that is specified by the -ac_notarypay param.

9) This amount is divided by the number of notaries who made the notarization. ie. it is shared equally between them.

10) The block is mined and propagates to all nodes. At this point the notarization check point is created and the notaries receive their pay, unless this block is subject to a reorg.

11) If a reorg is to happen, this notarization goes back into the mempool and will be once again at the top of the list to me mined and the notaries will be paid again in the same manner. Even if notarizations are mined out of order, any notarization that is mined will be inside its own block, and notaries must be paid in the coinbase of that block. It is important to note here that by a reorg we mean a reorg of the block the notarization transaction is included in, it is usually setting a checkpoint for about 3 blocks prior. That block cannot be reorged due to dPoW.

All nodes on validation with no slowflag (when a block has arrived out of order, does not have all prior blocks):

1) Check that the coinbase tx contains only 1 vout, if there are more than 1, then it assumes that Notaries have been paid.

2) It checks that the first tx is to the crypto address. If it isn‚Äôt the block is rejected.

3) It then checks the amount of vins in this transaction meets the minsigs for the current ERA, if this is not met it rejects the block.

4) Also to note here, while both these things are easily faked to create fake blocks that are stored in the local block DB, we have a special mode where all blocks are saved into a different file which dynamically allocates space until `connect block`. Once a notarization happens, any blocks left in this file are automatically purged. They are never added to the main chains block files. So there is no problem with people attempting to spam blocks in this way. They are only wasting their own resources, and gaining nothing.

All nodes with full validation:

1) At `connect block` a full validation is carried out before the block is added to the main block files . As stated before, if this block is invalid at this step it is left in the temp file and will eventually be deleted in run time.

2) Does a full block scan to get notarization position and to ensure a valid notarization is in position 1. If a notarization in the block it must be in position 1 and the coinbase must pay Notaries. If not the block is rejected. This is a normal check that all dPoW coins must do. We just used this scan to determine if the block contains a notarization, and that it is in the right place. This full block scan is only done once. After this we know exactly where it is.

3) When it sees that a block has a notarization in tx position 1, it now knows that Notaries must be paid. It then uses the same process as the miner to create the coinbase from this notarization, to compare whether the two transactions pay the same amount, and to pay the same pubkeys.

4) If all of this then passes the total amount that notaries are owed is added to the usual block subsidy amount. This allows the block to pass the coinbase amount validation later in `connect block`.

That‚Äôs pretty much it. All the code is open source on our GitHub and quite well commented. I want to make sure people understand that notaries cannot create any extra coins, only less coins.

Extra info for 0 Block Reward cluster chains:

I have added a new feature for notarypay chains that do not have their own coin emission. There is a burn address, that you can send coins to. The total amount paid by ac_notarypay is tracked inside the block index as a new parameter. When the total paid, is more than the amount in the burn address, iguana stops working. And will refuse to notarize until some more coins have been sent to the burn address. This is disabled on LABS itself, as notarypay is part of the coin emission.  For 0BR chains, or testing chains, if they are needed to continue being notarized, for extended periods, coins can be migrated from LABS and sent to the burn address. The RPC to check this is `getnotarypayinfo`.

‚Äî blackjok3r ‚Äî

=============

=============

### MINING & STAKING

=============

Mining & Staking

All of the coins generated in the KMDLabs cluster come from the main LABS chain. LABS is a 51% PoS and 49% PoW hybrid chain using the Komodo custom PoS64 algorithm created by jl777. The LABS coin has a block reward of 7 and a block time of 60s with detail of how to mine and stake below. Other test chains in the KMDLabs cluster (-ac_cc=101) main cluster have a block reward of 0 and CPU mining is the only way to mine them.

---

KMDLabs (LABS)

PoW 49% (Equihash): You can mine KMDLabs(LABS) with ASICs, FPGAs, and GPUs if the hash rate is low enough. If you don‚Äôt have an ASIC you can rent hash power from MiningRigRentals or NiceHash.  The KMDLabs mining pool is found at http://pool.cryptocartography.io/
 
PoS 51% (PoS64): You can stake the coins you buy, mine, or receive from a bounty. Notary nodes can opt to stake their earned coins on another node once they have been paid. How they manage this is up to them. A great tool for staking has been developed by Alright here.
 
NotaryNodes: Notary nodes are paid via the -ac_notarypay chain param. It‚Äôs coin emissions are designed to make up the other 3 coins of the coin emission (to make the total per minute 10) but they will never be exactly this, likely slightly less. Due to the fact notarizations do not always happen every single 5 blocks. -ac_notarypay is described in detail at the bottom of the Notary Node page.
 
Bounties: Bounties are extra coins created on top of coin emissions. They are not yet 100% defined but will be limited to a very small percentage of overall coin emission. There is more info on the Bounties page, which will be updated as the bounty mechanism is rolled out and developed.
 
-ac_params:  -ac_name=LABS -ac_supply=350689 -ac_reward=0,0,800000000 -ac_decay=0,100000000,100000000 -ac_halving=129,1 -ac_end=128,10080,0 -ac_notarypay=64,100000000,1000000000 -ac_eras=3 -ac_staked=51 -ac_sapling=1 -ac_cc=101 -ac_ccenable=226,236 -ac_cclib=labs -addnode=80.240.17.222 -addnode=195.201.20.230

---

Chain params

The KMDLabs chain (LABS) is a rather unique blockchain, likely the only one of its kind ever created, and aims to continue pushing the boundaries of technological development.


    -ac_name=LABS -ac_supply=350689 -ac_reward=0,0,800000000 -ac_decay=0,100000000,100000000 -ac_halving=129,1 -ac_end=128,10080,0 -ac_notarypay=64,100000000,1000000000 -ac_eras=3 -ac_staked=51 -ac_sapling=1 -ac_cc=101 -ac_ccenable=226,236 -ac_cclib=labs -addnode=80.240.17.222 -addnode=195.201.20.230

--- 

Pool

http://mininglabs.rocks/

=============

=============

### Bounties

=============

Bounties

Bounties (in KMDLabs) can be set for breaking test chains, finding bugs and finding solutions.

KMDLabs provides the test grounds for developers to set up and implement testing programs and a place for them to find testers.  Bounties are set and paid by the testing developers and Notary Nodes, not by KMDLabs itself.

KMDLabs can also organize testing for developers as resources permit. If you would like KMDLabs to arrange testing for you please contact us.

KMDLabs also performs testing of its own. Notary Node operators will decide through consensus to whom and what bounties will be paid for KMDLabs‚Äô own testing programs.

We do our best to keep this information as up to date as possible. To be sure of the most current information please reach out to us through Discord.

The bounty system is in the process of being finalized and is the top priority on the KMDLabs‚Äô project list. This development process will use the system under creation to bring about the final bounty mechanism. Aiming for the simplest solution. CC modules may or may not be made use of.

As it stands pre-launch, the basic mechanism looks like this:

‚Äì A separate chain, is mined/staked by notaries.
‚Äì There is a daily payment of coins that is ABOVE the supply of 10 coins per minute.
‚Äì This supply is suggested to be between 0.5-5% of the supply and is locked in a multisig address. (ie. 0.5% would be 720 coins per day available for bounty payouts)
‚Äì The funds expire if not used. The best mechanism for going about this is has yet to be determined.
‚Äì If the bounty coins are not claimed they will cease to exist and will not inflate the supply.
‚Äì Bounties only inflate the supply if bugs are found and fixed.
‚Äì Project devs are also able to put up their own bounties, over and above this supply, if they want or need to get something done faster or take priority over other projects.
‚Äì Bounty signers are responsible for signing bounty claims that they agree are fair.
‚Äì This mechanism will evolve and change as the working implementation is developed and optimized. There are a number of possible solutions being considered. KMDLabs developers and community excel at finding the best solution for a problem. This has been, and is being, demonstrated in the creation and beginnings of the KMDLabs project itself.

=============

=============

### TESTIMONIALS

=============

"I am really pleased to call KMDLabs a Komodo ecosystem project. Their remarkable dedication in the Blockchain Research & Development area has lead to significant tech optimizations in the Komodo core and Notary Node network."
ca333
Chief Technology Officer - Komodo

---

"So much cool stuff going on in here!"
Duke Leto
Developer

---

"They have extended their hands to help other community projects without conditions. Like KMDICE, they helped us get KMDICE to a very efficient state when we first started the chain. KMDLabs has a lot of future for sure."
Siu
KMDICE

---

"Alright and Blackjok3r have been amazing guys. They have developed a bunch of new tech that is so helpful for the community."
siu
KMDICE

=============

